import React, { useState } from 'react';
import CryptoJS from 'crypto-js';

function CifradoCesar() {
  const [texto, setTexto] = useState('');
  const [desplazamiento, setDesplazamiento] = useState('');
  const [resultado, setResultado] = useState('');

  const cifrar = () => {
    const desplazamientoInt = parseInt(desplazamiento);

    if (isNaN(desplazamientoInt)) {
      alert('Por favor, ingrese un valor válido para el desplazamiento.');
      return;
    }

    const resultado = cifrarCesar(texto, desplazamientoInt);
    setResultado('Resultado cifrado: ' + resultado);
  };

  const descifrar = () => {
    const desplazamientoInt = parseInt(desplazamiento);

    if (isNaN(desplazamientoInt)) {
      alert('Por favor, ingrese un valor válido para el desplazamiento.');
      return;
    }

    const resultado = descifrarCesar(texto, desplazamientoInt);
    setResultado('Resultado descifrado: ' + resultado);
  };

  const cifrarCesar = (texto, desplazamiento) => {
    return CryptoJS.AES.encrypt(texto, desplazamiento.toString()).toString();
  };

  const descifrarCesar = (textoCifrado, desplazamiento) => {
    const bytes = CryptoJS.AES.decrypt(textoCifrado, desplazamiento.toString());
    return bytes.toString(CryptoJS.enc.Utf8);
  };

  return (
    <div>
      <h1>Cifrado César</h1>
      <label htmlFor="texto">Texto:</label>
      <input
        type="text"
        id="texto"
        placeholder="Ingrese una palabra"
        value={texto}
        onChange={(e) => setTexto(e.target.value)}
      />
      <label htmlFor="desplazamiento">Desplazamiento:</label>
      <input
        type="number"
        id="desplazamiento"
        placeholder="Ingrese el desplazamiento"
        value={desplazamiento}
        onChange={(e) => setDesplazamiento(e.target.value)}
      />
      <button onClick={cifrar}>Cifrar</button>
      <button onClick={descifrar}>Descifrar</button>
      <div id="resultado">{resultado}</div>
    </div>
  );
}

export default CifradoCesar;
